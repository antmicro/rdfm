

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>RDFM Artifact utility - RDFM Documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="_static/sphinx_immaterial_theme.0074f731f8a211b06.min.css?v=a5c09059" />
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="RDFM Documentation" class="md-header__button md-logo" aria-label="RDFM Documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RDFM Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RDFM Artifact utility
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <div class="md-header__button">
        <a href="rdfm-docs.pdf" title="PDF - rdfm-docs.pdf">
          <div class="md-icon">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zm192 0v128h128L256 0zM64 224h24c30.9 0 56 25.1 56 56s-25.1 56-56 56h-8v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V240c0-8.8 7.2-16 16-16zm24 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8v48h8zm72-64c0-8.8 7.2-16 16-16h24c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-24c-8.8 0-16-7.2-16-16V240zm32 112h8c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-8v96zm96-128h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V240c0-8.8 7.2-16 16-16z"/></svg>
          </div>
        </a>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="RDFM Documentation" class="md-nav__button md-logo" aria-label="RDFM Documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    RDFM Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="introduction.html" class="md-nav__link">
        <span class="md-ellipsis">Introduction</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="system_overview.html" class="md-nav__link">
        <span class="md-ellipsis">System Architecture</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_linux_device_client.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Linux Device Client</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_android_device_client.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Android Device Client</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_mcumgr_device_client.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM MCUmgr Device Client</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">RDFM Artifact utility</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">RDFM Artifact utility</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">Introduction</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">Getting started</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-from-source" class="md-nav__link">
    <span class="md-ellipsis">Building from source</span>
  </a>
  
    <nav class="md-nav" aria-label="Building from source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">Requirements</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    <span class="md-ellipsis">Steps</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">Basic usage</span>
  </a>
  
    <nav class="md-nav" aria-label="Basic usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-full-rootfs-artifact" class="md-nav__link">
    <span class="md-ellipsis">Creating a full-<wbr>rootfs artifact</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-delta-rootfs-artifact" class="md-nav__link">
    <span class="md-ellipsis">Creating a delta rootfs artifact</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-zephyr-mcuboot-artifact" class="md-nav__link">
    <span class="md-ellipsis">Creating a Zephyr MCUboot artifact</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-zephyr-mcuboot-group-artifact" class="md-nav__link">
    <span class="md-ellipsis">Creating a Zephyr MCUboot group artifact</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-single-file-artifact" class="md-nav__link">
    <span class="md-ellipsis">Creating a single file artifact</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-tests" class="md-nav__link">
    <span class="md-ellipsis">Running tests</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_manager.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Manager utility</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_mgmt_server.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Management Server</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_ota_manual.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM OTA Manual</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="server_operation.html" class="md-nav__link">
        <span class="md-ellipsis">Server Integration flows</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_frontend.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Frontend</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="api.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Server API Reference</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="rdfm-artifact-utility">RDFM Artifact utility<a class="headerlink" href="#rdfm-artifact-utility" title="Permalink to this heading">¶</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>The RDFM Artifact tool (<code class="docutils literal notranslate"><span class="pre">rdfm-artifact</span></code>) allows for easy creation and modification of RDFM Linux client-compatible artifacts containing rootfs partition images.
A basic RDFM artifact consists of a rootfs image, as well as its checksum, metadata and compatibility with certain device types.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">rdfm-artifact</span></code> allows for the generation of delta updates, which contain only the differences between two versions of an artifact rather than the entire artifact itself.
This can be useful for reducing the size of updates and improving the efficiency of the deployment process.</p>
<p><code class="docutils literal notranslate"><span class="pre">rdfm-artifact</span></code> can also be used for generation of Zephyr MCUboot artifacts, which allows for updating embedded devices running Zephyr.
Additionally, multiple Zephyr images can be combined into one grouped artifact to allow multiple boards to act as one logical device.</p>
<p>Single file updates are also supported.
This option allows for creating, or updating specific files on the device, without the need to update the whole partition.</p>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h2>
<p>In order to support robust updates and rollback, the RDFM Client requires proper partition layout and a bootloader that supports A/B update scheme. To make it easy to integrate the RDFM Client into your Yocto image-building project, it’s recommended to use the <a class="reference external" href="https://github.com/antmicro/meta-antmicro/tree/master/meta-rdfm">meta-rdfm</a> Yocto layer when building the BSPs.</p>
<h2 id="building-from-source">Building from source<a class="headerlink" href="#building-from-source" title="Permalink to this heading">¶</a></h2>
<h3 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Go compiler</p></li>
<li><p>C Compiler</p></li>
<li><p>liblzma-dev and libglib2.0-dev packages</p></li>
<li><p><a class="reference external" href="https://github.com/antmicro/go-xdelta">go-xdelta</a> library</p></li>
</ul>
<h3 id="steps">Steps<a class="headerlink" href="#steps" title="Permalink to this heading">¶</a></h3>
<p>To build <code class="docutils literal notranslate"><span class="pre">rdfm-artifact</span></code> on a device from source, clone the repository and build the binary using <code class="docutils literal notranslate"><span class="pre">make</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">antmicro</span><span class="o">/</span><span class="n">rdfm</span><span class="o">.</span><span class="n">git</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">tools</span><span class="o">/</span><span class="n">rdfm</span><span class="o">-</span><span class="n">artifact</span><span class="o">/</span>
<span class="n">make</span>
</code></pre></div>
</div>
<p>Ensure the go-xdelta library is installed beforehand. You can install it by following the instructions in the go-xdelta repository. Use the CMake options <code class="docutils literal notranslate"><span class="pre">-DCGO_INTEGRATION=ON</span> <span class="pre">-DENCODER=ON</span></code> during the build process.</p>
<h2 id="basic-usage">Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this heading">¶</a></h2>
<p>The basic functionality of writing an artifact is available with the <code class="docutils literal notranslate"><span class="pre">write</span></code> subcommand:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">NAME</span><span class="p">:</span>
   <span class="n">rdfm</span><span class="o">-</span><span class="n">artifact</span> <span class="n">write</span> <span class="o">-</span> <span class="n">Allows</span> <span class="n">creation</span> <span class="n">of</span> <span class="n">RDFM</span><span class="o">-</span><span class="n">compatible</span> <span class="n">artifacts</span>

<span class="n">USAGE</span><span class="p">:</span>
   <span class="n">rdfm</span><span class="o">-</span><span class="n">artifact</span> <span class="n">write</span> <span class="n">command</span> <span class="p">[</span><span class="n">command</span> <span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="n">arguments</span><span class="o">...</span><span class="p">]</span>

<span class="n">COMMANDS</span><span class="p">:</span>
   <span class="n">rootfs</span><span class="o">-</span><span class="n">image</span>        <span class="n">Create</span> <span class="n">a</span> <span class="n">full</span> <span class="n">rootfs</span> <span class="n">image</span> <span class="n">artifact</span>
   <span class="n">delta</span><span class="o">-</span><span class="n">rootfs</span><span class="o">-</span><span class="n">image</span>  <span class="n">Create</span> <span class="n">a</span> <span class="n">delta</span> <span class="n">rootfs</span> <span class="n">artifact</span>
   <span class="n">zephyr</span><span class="o">-</span><span class="n">image</span>        <span class="n">Create</span> <span class="n">a</span> <span class="n">full</span> <span class="n">Zephyr</span> <span class="n">MCUboot</span> <span class="n">image</span> <span class="n">artifact</span>
   <span class="n">zephyr</span><span class="o">-</span><span class="n">group</span><span class="o">-</span><span class="n">image</span>  <span class="n">Create</span> <span class="n">a</span> <span class="n">Zephyr</span> <span class="n">MCUboot</span> <span class="n">group</span> <span class="n">image</span> <span class="n">artifact</span>
   <span class="n">single</span><span class="o">-</span><span class="n">file</span>         <span class="n">Create</span> <span class="n">a</span> <span class="n">single</span> <span class="n">file</span> <span class="n">artifact</span>

<span class="n">OPTIONS</span><span class="p">:</span>
   <span class="o">--</span><span class="n">help</span><span class="p">,</span> <span class="o">-</span><span class="n">h</span>  <span class="n">show</span> <span class="n">help</span>
</code></pre></div>
</div>
<h3 id="creating-a-full-rootfs-artifact">Creating a full-rootfs artifact<a class="headerlink" href="#creating-a-full-rootfs-artifact" title="Permalink to this heading">¶</a></h3>
<p>For example, to create a simple rootfs artifact for a given system image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">rdfm</span><span class="o">-</span><span class="n">artifact</span> <span class="n">write</span> <span class="n">rootfs</span><span class="o">-</span><span class="n">image</span> \
	<span class="o">--</span><span class="n">file</span> <span class="s2">&quot;my-rootfs-image.img&quot;</span> \
	<span class="o">--</span><span class="n">artifact</span><span class="o">-</span><span class="n">name</span> <span class="s2">&quot;my-artifact-name&quot;</span> \
	<span class="o">--</span><span class="n">device</span><span class="o">-</span><span class="nb">type</span> <span class="s2">&quot;my-device-type&quot;</span> \
	<span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">path</span> <span class="s2">&quot;path-to-output.rdfm&quot;</span>
</code></pre></div>
</div>
<h3 id="creating-a-delta-rootfs-artifact">Creating a delta rootfs artifact<a class="headerlink" href="#creating-a-delta-rootfs-artifact" title="Permalink to this heading">¶</a></h3>
<p>For creating a delta artifact, you should have already created two separate full-rootfs artifacts:</p>
<ul class="simple">
<li><p>base artifact - the rootfs image that the deltas will be applied on top of, or in other words: the currently running rootfs on the device</p></li>
<li><p>target artifact - the updated rootfs image that will be installed on the device</p></li>
</ul>
<p>RDFM Artifact tool provides two algortihms for delta artifact generation:</p>
<ul class="simple">
<li><p><strong>rsync</strong> - produces larger delta sizes with slower encoding but faster decoding (default).</p></li>
<li><p><strong>xdelta</strong> - produces smaller delta sizes with faster encoding but slower decoding.</p></li>
</ul>
<p>Choose <strong>rsync</strong> to minimize computational load during update application on the target device, or <strong>xdelta</strong> to prioritize a smaller update package size.</p>
<p>The delta algorithm can be specified using <code class="docutils literal notranslate"><span class="pre">--delta-algorithm</span></code> flag. If no algorithm is specified, RDFM defaults to <strong>rsync</strong>.</p>
<p>For example, to generate an <code class="docutils literal notranslate"><span class="pre">rsync</span></code> delta artifact:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">rdfm</span><span class="o">-</span><span class="n">artifact</span> <span class="n">write</span> <span class="n">delta</span><span class="o">-</span><span class="n">rootfs</span><span class="o">-</span><span class="n">image</span> \
    <span class="o">--</span><span class="n">base</span><span class="o">-</span><span class="n">artifact</span> <span class="s2">&quot;base.rdfm&quot;</span> \
    <span class="o">--</span><span class="n">target</span><span class="o">-</span><span class="n">artifact</span> <span class="s2">&quot;target.rdfm&quot;</span> \
    <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">path</span> <span class="s2">&quot;base-to-target.rdfm&quot;</span> \
    <span class="o">--</span><span class="n">delta</span><span class="o">-</span><span class="n">algorithm</span> <span class="s2">&quot;rsync&quot;</span>
</code></pre></div>
</div>
<h3 id="creating-a-zephyr-mcuboot-artifact">Creating a Zephyr MCUboot artifact<a class="headerlink" href="#creating-a-zephyr-mcuboot-artifact" title="Permalink to this heading">¶</a></h3>
<p>To create a Zephyr MCUboot artifact, you’ll have to have already created a Zephyr image with MCUboot support enabled.
You should use the signed bin image (by default <code class="docutils literal notranslate"><span class="pre">zephyr.signed.bin</span></code>).
Artifact version will be extracted from provided image.</p>
<p>With this image, you can generate an artifact like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">rdfm</span><span class="o">-</span><span class="n">artifact</span> <span class="n">write</span> <span class="n">zephyr</span><span class="o">-</span><span class="n">image</span> \
   <span class="o">--</span><span class="n">file</span> <span class="s2">&quot;my-zephyr-image.signed.bin&quot;</span> \
   <span class="o">--</span><span class="n">artifact</span><span class="o">-</span><span class="n">name</span> <span class="s2">&quot;my-artifact-name&quot;</span> \
   <span class="o">--</span><span class="n">device</span><span class="o">-</span><span class="nb">type</span> <span class="s2">&quot;my-device-type&quot;</span> \
   <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">path</span> <span class="s2">&quot;path-to-output.rdfm&quot;</span>
</code></pre></div>
</div>
<h3 id="creating-a-zephyr-mcuboot-group-artifact">Creating a Zephyr MCUboot group artifact<a class="headerlink" href="#creating-a-zephyr-mcuboot-group-artifact" title="Permalink to this heading">¶</a></h3>
<p>To create a grouped Zephyr MCUboot artifact, you should have already created at least two Zephyr images with MCUboot support enabled.
The version of individual images in a grouped artifact must be identical.</p>
<p>Given images <code class="docutils literal notranslate"><span class="pre">one.bin</span></code> and <code class="docutils literal notranslate"><span class="pre">two.bin</span></code> for group targets <code class="docutils literal notranslate"><span class="pre">one</span></code> and <code class="docutils literal notranslate"><span class="pre">two</span></code> respectively, an artifact can be generated with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">rdfm</span><span class="o">-</span><span class="n">artifact</span> <span class="n">write</span> <span class="n">zephyr</span><span class="o">-</span><span class="n">group</span><span class="o">-</span><span class="n">image</span> \
	<span class="o">--</span><span class="n">group</span><span class="o">-</span><span class="nb">type</span> <span class="s2">&quot;my-group&quot;</span> \
	<span class="o">--</span><span class="n">target</span> <span class="s2">&quot;one:one.bin&quot;</span> \
	<span class="o">--</span><span class="n">target</span> <span class="s2">&quot;two:two.bin&quot;</span> \
	<span class="o">--</span><span class="n">ouptput</span><span class="o">-</span><span class="n">path</span> <span class="s2">&quot;path-to-output.rdfm&quot;</span>
</code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s possible to create a grouped artifact with just one image,
however in cases like that you should create simple <a class="reference internal" href="#creating-a-zephyr-mcuboot-artifact"><span class="xref myst">zephyr-image</span></a> instead.</p>
</div>
<h3 id="creating-a-single-file-artifact">Creating a single file artifact<a class="headerlink" href="#creating-a-single-file-artifact" title="Permalink to this heading">¶</a></h3>
<p>Apart from updating a whole partition, it’s also possible to update a single file on the device.
The usage is the same as for rootfs artifacts, but with the <code class="docutils literal notranslate"><span class="pre">single-file</span></code> subcommand and two new options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--dest-dir</span></code> - the destination directory on the device where the file should be placed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--rollback-support</span></code> - (optional) determines, whether a backup of the file should be created for rollback purposes.
The backup file is stored in the same directory as the original file, with the <code class="docutils literal notranslate"><span class="pre">.tmp</span></code> extension added to the name.
By default, the rollback support is disabled.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">rdfm</span><span class="o">-</span><span class="n">artifact</span> <span class="n">write</span> <span class="n">single</span><span class="o">-</span><span class="n">file</span> \
	<span class="o">--</span><span class="n">file</span> <span class="s2">&quot;my-file.txt&quot;</span> \
	<span class="o">--</span><span class="n">artifact</span><span class="o">-</span><span class="n">name</span> <span class="s2">&quot;my-artifact-name&quot;</span> \
	<span class="o">--</span><span class="n">device</span><span class="o">-</span><span class="nb">type</span> <span class="s2">&quot;my-device-type&quot;</span> \
	<span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">path</span> <span class="s2">&quot;path-to-output.rdfm&quot;</span> \
	<span class="o">--</span><span class="n">dest</span><span class="o">-</span><span class="nb">dir</span> <span class="s2">&quot;/destination/device/directory&quot;</span> \
	<span class="o">--</span><span class="n">rollback</span><span class="o">-</span><span class="n">support</span>
</code></pre></div>
</div>
<h2 id="running-tests">Running tests<a class="headerlink" href="#running-tests" title="Permalink to this heading">¶</a></h2>
<p>To run <code class="docutils literal notranslate"><span class="pre">rdfm-artifact</span></code> tests, use the <code class="docutils literal notranslate"><span class="pre">test</span></code>  Makefile target:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="n">make</span> <span class="n">test</span>
</code></pre></div>
</div>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2025-10-31
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="rdfm_mcumgr_device_client.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: RDFM MCUmgr Device Client" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              RDFM MCUmgr Device Client
            </div>
          </div>
        </a>
      
      
        
        <a href="rdfm_manager.html" class="md-footer__link md-footer__link--next" aria-label="Next: RDFM Manager utility" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              RDFM Manager utility
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        Copyright &#169; Antmicro, 2025.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/antmicro" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/antmicro" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["toc.integrate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
    
  </body>
</html>