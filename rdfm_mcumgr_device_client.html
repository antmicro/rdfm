

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>RDFM MCUmgr Device Client - RDFM Documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="_static/sphinx_immaterial_theme.0074f731f8a211b06.min.css?v=a5c09059" />
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="RDFM Documentation" class="md-header__button md-logo" aria-label="RDFM Documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RDFM Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RDFM MCUmgr Device Client
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <div class="md-header__button">
        <a href="rdfm-docs.pdf" title="PDF - rdfm-docs.pdf">
          <div class="md-icon">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zm192 0v128h128L256 0zM64 224h24c30.9 0 56 25.1 56 56s-25.1 56-56 56h-8v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V240c0-8.8 7.2-16 16-16zm24 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8v48h8zm72-64c0-8.8 7.2-16 16-16h24c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-24c-8.8 0-16-7.2-16-16V240zm32 112h8c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-8v96zm96-128h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V240c0-8.8 7.2-16 16-16z"/></svg>
          </div>
        </a>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="RDFM Documentation" class="md-nav__button md-logo" aria-label="RDFM Documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    RDFM Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="introduction.html" class="md-nav__link">
        <span class="md-ellipsis">Introduction</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="system_overview.html" class="md-nav__link">
        <span class="md-ellipsis">System Architecture</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_linux_device_client.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Linux Device Client</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_android_device_client.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Android Device Client</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">RDFM MCUmgr Device Client</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">RDFM MCUmgr Device Client</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">Introduction</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">Getting started</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-client-from-source" class="md-nav__link">
    <span class="md-ellipsis">Building client from source</span>
  </a>
  
    <nav class="md-nav" aria-label="Building client from source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">Requirements</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    <span class="md-ellipsis">Steps</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-target-device" class="md-nav__link">
    <span class="md-ellipsis">Setting up target device</span>
  </a>
  
    <nav class="md-nav" aria-label="Setting up target device">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-bootloader" class="md-nav__link">
    <span class="md-ellipsis">Setting up the bootloader</span>
  </a>
  
    <nav class="md-nav" aria-label="Setting up the bootloader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generating-image-signing-key" class="md-nav__link">
    <span class="md-ellipsis">Generating image signing key</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-the-bootloader" class="md-nav__link">
    <span class="md-ellipsis">Building the bootloader</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-zephyr-application" class="md-nav__link">
    <span class="md-ellipsis">Setting up the Zephyr application</span>
  </a>
  
    <nav class="md-nav" aria-label="Setting up the Zephyr application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-the-image" class="md-nav__link">
    <span class="md-ellipsis">Building the image</span>
  </a>
  
    <nav class="md-nav" aria-label="Building the image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bluetooth-specific" class="md-nav__link">
    <span class="md-ellipsis">Bluetooth specific</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signing-the-image" class="md-nav__link">
    <span class="md-ellipsis">Signing the image</span>
  </a>
  
    <nav class="md-nav" aria-label="Signing the image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automatically" class="md-nav__link">
    <span class="md-ellipsis">Automatically</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manually" class="md-nav__link">
    <span class="md-ellipsis">Manually</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self-confirmed-updates" class="md-nav__link">
    <span class="md-ellipsis">Self-<wbr>confirmed updates</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-mcumgr-client" class="md-nav__link">
    <span class="md-ellipsis">Configuring MCUmgr client</span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring MCUmgr client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#search-locations" class="md-nav__link">
    <span class="md-ellipsis">Search locations</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-values" class="md-nav__link">
    <span class="md-ellipsis">Configuration values</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-groups" class="md-nav__link">
    <span class="md-ellipsis">Device groups</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configuration" class="md-nav__link">
    <span class="md-ellipsis">Example configuration</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-keys" class="md-nav__link">
    <span class="md-ellipsis">Device keys</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_artifact.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Artifact utility</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_manager.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Manager utility</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_mgmt_server.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Management Server</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_ota_manual.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM OTA Manual</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="server_operation.html" class="md-nav__link">
        <span class="md-ellipsis">Server Integration flows</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="rdfm_frontend.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Frontend</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="api.html" class="md-nav__link">
        <span class="md-ellipsis">RDFM Server API Reference</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="rdfm-mcumgr-device-client">RDFM MCUmgr Device Client<a class="headerlink" href="#rdfm-mcumgr-device-client" title="Permalink to this heading">¶</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>The RDFM MCUmgr Device Client (<code class="docutils literal notranslate"><span class="pre">rdfm-mcumgr-client</span></code>) allows for integrating an embedded device running ZephyrRTOS with the RDFM server via its MCUmgr SMP server implementation.
Currently, only the update functionality is implemented with support for serial, UDP and BLE transports.</p>
<p><code class="docutils literal notranslate"><span class="pre">rdfm-mcumgr-client</span></code> runs on a proxy device that’s connected to the targets via one of the supported transports that handles the process of checking for updates, fetching update artifacts and pushing update images down to correct targets.</p>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h2>
<p>In order to properly function, both the Zephyr application and the <code class="docutils literal notranslate"><span class="pre">rdfm-mcumgr-client</span></code> have to be correctly configured in order for the update functionality to work.
Specifically:</p>
<ul class="simple">
<li><p>Zephyr applications must be built with MCUmgr support, with any transport method of your choice and with image management and reboot command groups enabled.</p></li>
<li><p>The device running Zephyr must be connected to a proxy device running <code class="docutils literal notranslate"><span class="pre">rdfm-mcumgr-client</span></code> as the updates are coming from it.</p></li>
<li><p>For reliable updates, the SMP server must be running alongside your application and be accessible at all times.</p></li>
</ul>
<h2 id="building-client-from-source">Building client from source<a class="headerlink" href="#building-client-from-source" title="Permalink to this heading">¶</a></h2>
<h3 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>C compiler</p></li>
<li><p>Go compiler (1.22+)</p></li>
<li><p>liblzma-dev and libssl-dev packages</p></li>
</ul>
<h3 id="steps">Steps<a class="headerlink" href="#steps" title="Permalink to this heading">¶</a></h3>
<p>To install the proxy client from source, first clone the repository and build the binary:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/antmicro/rdfm.git
<span class="nb">cd</span><span class="w"> </span>rdfm/devices/mcumgr-client/
make
</code></pre></div>
</div>
<p>Then run the install command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>make<span class="w"> </span>install
</code></pre></div>
</div>
<h2 id="setting-up-target-device">Setting up target device<a class="headerlink" href="#setting-up-target-device" title="Permalink to this heading">¶</a></h2>
<h3 id="setting-up-the-bootloader">Setting up the bootloader<a class="headerlink" href="#setting-up-the-bootloader" title="Permalink to this heading">¶</a></h3>
<p>To allow rollbacks and update verification, the MCUboot bootloader is used.
Images uploaded by <code class="docutils literal notranslate"><span class="pre">rdfm-mcumgr-client</span></code> are written to a secondary flash partition, while leaving the primary (currently running) image intact.
During update, the images are swapped by the bootloader.
If the update was successful, the new image is permanently set as the primary one, otherwise the images are swapped back to restore the previous version.
For more details on MCUboot, you can read the <a class="reference external" href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/mcuboot/readme-zephyr.html#building-and-using-mcuboot-with-zephyr">official guide</a> from MCUboot’s website.</p>
<h4 id="generating-image-signing-key">Generating image signing key<a class="headerlink" href="#generating-image-signing-key" title="Permalink to this heading">¶</a></h4>
<p>In order to enable updates, MCUboot requires all images to be signed.
During update, the bootloader will first validate the image using this key.</p>
<p>MCUboot provides <code class="docutils literal notranslate"><span class="pre">imgtool.py</span></code> image tool script which can be used to generate appropriate signing key.
Below are the steps needed to generate a new key using this tool:</p>
<p>Install additional packages required by the tool (replace <code class="docutils literal notranslate"><span class="pre">~/zephyrproject</span></code> with path to your Zephyr workspace):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/zephyrproject/bootloader/mcuboot
pip3<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>-r<span class="w"> </span>./scripts/requirements.txt
</code></pre></div>
</div>
<p>Generate new key:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/zephyrproject/bootloader/mcuboot/scripts
./imgtool.py<span class="w"> </span>keygen<span class="w"> </span>-k<span class="w"> </span>&lt;filename.pem&gt;<span class="w"> </span>-t<span class="w"> </span>&lt;key-type&gt;
</code></pre></div>
</div>
<p>MCUboot currently supports <code class="docutils literal notranslate"><span class="pre">rsa-2048</span></code>, <code class="docutils literal notranslate"><span class="pre">rsa-3072</span></code>, <code class="docutils literal notranslate"><span class="pre">ecdsa-p256</span></code> or <code class="docutils literal notranslate"><span class="pre">ed25519</span></code> key types.
For more details on the image tool, please refer to its <a class="reference external" href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/mcuboot/imgtool.html">official documentation</a>.</p>
<h4 id="building-the-bootloader">Building the bootloader<a class="headerlink" href="#building-the-bootloader" title="Permalink to this heading">¶</a></h4>
<p>Besides the signing key, MCUboot also requires that the target board has specific flash partitions defined in its devicetree.
These partitions are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boot_partition</span></code>: for MCUboot itself</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slot0_partition</span></code>: the priamry slot of image 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slot1_partition</span></code>: the secondary slot of image 0</p></li>
</ul>
<p>If you choose the <em>swap-using-scratch</em> update algorithm, one more partition has to be defined:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scratch_partition</span></code>: the scratch slot</p></li>
</ul>
<p>You can check whether your board has those partitions predefined by looking at its devicetree file (<code class="docutils literal notranslate"><span class="pre">boards/&lt;arch&gt;/&lt;board&gt;/&lt;board&gt;.dts</span></code>).
Look for <code class="docutils literal notranslate"><span class="pre">fixed-partitions</span></code> compatible entry. If your default board configuration doesn’t specify those partitions (or you would like to modify them),
you can either modify the devicetree file directly or use <a class="reference external" href="https://docs.zephyrproject.org/latest/build/dts/howtos.html#set-devicetree-overlays">devicetree overlays</a>.</p>
<p>Sample overlay file for the <code class="docutils literal notranslate"><span class="pre">stm32f746g_disco</span></code> board:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="cm"> </span><span class="cpf">&lt;mem.h&gt;</span>

<span class="cp">/delete-node/</span><span class="cm"> </span><span class="cp">&amp;quadspi</span><span class="p">;</span>

<span class="o">&amp;</span><span class="na">flash0</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">partitions</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;fixed-partitions&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="kr">#address-cells</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">        </span><span class="kr">#size-cells</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">;</span>

<span class="w">        </span><span class="nl">boot_partition</span><span class="p">:</span><span class="w"> </span><span class="nf">partition</span><span class="o">@</span><span class="mi">0</span><span class="cm"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;mcuboot&quot;</span><span class="p">;</span>
<span class="w">            </span><span class="kr">reg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mh">0x00000000</span><span class="w"> </span><span class="na">DT_SIZE_K</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="nl">slot0_partition</span><span class="p">:</span><span class="w"> </span><span class="nf">partition</span><span class="o">@</span><span class="mi">40000</span><span class="cm"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;image-0&quot;</span><span class="p">;</span>
<span class="w">            </span><span class="kr">reg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mh">0x00040000</span><span class="w"> </span><span class="na">DT_SIZE_K</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="nl">slot1_partition</span><span class="p">:</span><span class="w"> </span><span class="nf">partition</span><span class="o">@</span><span class="mi">80000</span><span class="cm"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;image-1&quot;</span><span class="p">;</span>
<span class="w">            </span><span class="kr">reg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mh">0x00080000</span><span class="w"> </span><span class="na">DT_SIZE_K</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="nl">scratch_partition</span><span class="p">:</span><span class="w"> </span><span class="nf">partition</span><span class="o">@</span><span class="mi">c0000</span><span class="cm"> </span><span class="p">{</span>
<span class="w">        	</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;scratch&quot;</span><span class="p">;</span>
<span class="w">        	</span><span class="kr">reg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mh">0x000c0000</span><span class="w"> </span><span class="na">DT_SIZE_K</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">};</span>

<span class="nf">/</span><span class="cm"> </span><span class="p">{</span>
<span class="w">    </span><span class="nf">aliases</span><span class="cm"> </span><span class="p">{</span>
<span class="w">        </span><span class="cp">/delete-property/</span><span class="cm"> </span><span class="cp">spi-flash0</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="nf">chosen</span><span class="cm"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">zephyr</span><span class="p">,</span><span class="n">flash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">flash0</span><span class="p">;</span>
<span class="w">        </span><span class="n">zephyr</span><span class="p">,</span><span class="n">flash-controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">flash</span><span class="p">;</span>
<span class="w">        </span><span class="n">zephyr</span><span class="p">,</span><span class="n">boot-partition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">boot_partition</span><span class="p">;</span>
<span class="w">        </span><span class="n">zephyr</span><span class="p">,</span><span class="n">code-partition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">slot0_partition</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">};</span>
</code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you do use devicetree overlay, make sure to add <code class="docutils literal notranslate"><span class="pre">app.overlay</span></code> as the last overlay file
since it’s needed to correctly store the MCUboot image in <code class="docutils literal notranslate"><span class="pre">boot_partition</span></code>.</p>
</div>
<p>Besides the devicetree, you also have to specify:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BOOT_SIGNATURE_KEY_FILE</span></code>: path to the previously generate signing key</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOT_SIGNATURE_TYPE</span></code>: signing key type:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOT_SIGNATURE_TYPE_RSA</span></code> and <code class="docutils literal notranslate"><span class="pre">BOOT_SIGNATURE_TYPE_RSA_LEN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOT_SIGNATURE_TYPE_ECDSA_P256</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOT_SIGNATURE_TYPE_ED25519</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOT_IMAGE_UPGRADE_MODE</span></code>: the <a class="reference external" href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/mcuboot/design.html#image-slots">update algorithm</a> used for swapping images in primary and secondary slots:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOT_SWAP_USING_MOVE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOT_SWAP_USING_SCRATCH</span></code></p></li>
</ul>
</li>
</ul>
<p>For example, if you wanted to build the bootloader for the <code class="docutils literal notranslate"><span class="pre">stm32f746g_disco</span></code> board with partitions defined in <code class="docutils literal notranslate"><span class="pre">stm32_disco.overlay</span></code>,
using <em>swap-using-scratch</em> update algorithm and using <code class="docutils literal notranslate"><span class="pre">rsa-2048</span></code> <code class="docutils literal notranslate"><span class="pre">key.pem</span></code> signing key,
you would run (replace <code class="docutils literal notranslate"><span class="pre">~/zephyrproject</span></code> with path to your Zephyr workspace):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code><span class="w">    </span>west<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-d<span class="w"> </span>mcuboot<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-b<span class="w"> </span>stm32f746g_disco<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>~/zephyrproject/bootloader/mcuboot/boot/zephyr<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--<span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DDTC_OVERLAY_FILE<span class="o">=</span><span class="s2">&quot;stm32_disco.overlay;app.overlay&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DCONFIG_BOOT_SIGNATURE_KEYFILE<span class="o">=</span><span class="s1">&#39;&quot;key.pem&quot;&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DCONFIG_BOOT_SIGNATURE_TYPE_RSA<span class="o">=</span>y<span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DCONFIG_BOOT_SIGNATURE_TYPE_RSA_LEN<span class="o">=</span><span class="m">2048</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DCONFIG_BOOT_SWAP_USING_SCRATCH<span class="o">=</span>y
</code></pre></div>
</div>
<p>The produced image can be flashed to your device.
For more details on building and using MCUboot with Zephyr, please refer to <a class="reference external" href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/mcuboot/readme-zephyr.html#building-and-using-mcuboot-with-zephyr">official MCUboot guide</a>.</p>
<h3 id="setting-up-the-zephyr-application">Setting up the Zephyr application<a class="headerlink" href="#setting-up-the-zephyr-application" title="Permalink to this heading">¶</a></h3>
<h4 id="building-the-image">Building the image<a class="headerlink" href="#building-the-image" title="Permalink to this heading">¶</a></h4>
<p>To allow your application to be used with MCUmgr client, you will have to enable Zephyr’s <a class="reference external" href="https://docs.zephyrproject.org/latest/services/device_mgmt/index.html#device-mgmt">device management subsystem</a>.
For the client to function properly, both <a class="reference external" href="https://docs.zephyrproject.org/latest/services/device_mgmt/smp_groups/smp_group_1.html"><em>image management</em></a>
and <a class="reference external" href="https://docs.zephyrproject.org/latest/services/device_mgmt/smp_groups/smp_group_0.html"><em>OS management</em></a> groups need to be enabled.
You will also have to enable and configure <a class="reference external" href="https://docs.zephyrproject.org/latest/services/device_mgmt/smp_transport.html">SMP transport</a>
(either serial, BLE or udp) that you wish to use.
To learn how to do that, you can reference Zephyr’s <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/tree/main/samples/subsys/mgmt/mcumgr/smp_svr"><code class="docutils literal notranslate"><span class="pre">smp_svr</span></code> sample</a>
which provides configuration for all of them.</p>
<p>You will also have set <code class="docutils literal notranslate"><span class="pre">MCUBOOT_BOOTLOADER_MODE</span></code> setting to match the <em>swapping algorithm</em> you’ve configured for the <a class="reference internal" href="#building-the-bootloader"><span class="xref myst">bootloader</span></a>:</p>
<table class="docutils data align-default" id="swap-algorithm-configuration-options">
<thead>
<tr class="row-odd"><th class="head"><p>MCUboot</p></th>
<th class="head"><p>Zephyr</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOT_SWAP_USING_MOVE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCUBOOT_BOOTLOADER_MODE_SWAP_WITHOUT_SCRATCH</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BOOT_SWAP_USING_SCRATCH</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCUBOOT_BOOTLOADER_MODE_SWAP_SCRATCH</span></code></p></td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<h4 class="rubric" id="bluetooth-specific">Bluetooth specific</h4>
<p>Bluetooth transport additionally requires you to manually start SMB Bluetooth advertising.
Refer to the <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/dbfc1aaec697b78573c18d83fd40ba66ff63c0b3/samples/subsys/mgmt/mcumgr/smp_svr/src/main.c#L70-L72"><code class="docutils literal notranslate"><span class="pre">main.c</span></code></a>
and <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/dbfc1aaec697b78573c18d83fd40ba66ff63c0b3/samples/subsys/mgmt/mcumgr/smp_svr/src/bluetooth.c"><code class="docutils literal notranslate"><span class="pre">bluetooth.c</span></code></a>
from the <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/tree/main/samples/subsys/mgmt/mcumgr/smp_svr"><code class="docutils literal notranslate"><span class="pre">smp_svr</span></code> sample</a> for details on that.</p>
</div>
<p>To build the <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/tree/main/samples/subsys/mgmt/mcumgr/smp_svr"><code class="docutils literal notranslate"><span class="pre">smp_svr</span></code> sample</a>
for the <code class="docutils literal notranslate"><span class="pre">stm32f746g_disco</span></code> board with <code class="docutils literal notranslate"><span class="pre">stm32_disco.overlay</span></code> devicetree overlay,
configured to use serial transport with <em>swap-using-scratch</em> update algorithm,
you would run (replace <code class="docutils literal notranslate"><span class="pre">~/zephyrproject</span></code> with path to your Zephyr workspace):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code><span class="w">    </span>west<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-d<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-b<span class="w"> </span>stm32f746g_disco<span class="w"> </span><span class="se">\</span>
<span class="w">        </span><span class="s2">&quot;~/zephyrproject/zephyr/samples/subsys/mgmt/mcumgr/smp_svr&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--<span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DDTC_OVERLAY_FILE<span class="o">=</span><span class="s2">&quot;stm32_disco.overlay&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DEXTRA_CONF_FILE<span class="o">=</span><span class="s2">&quot;overlay-serial.conf&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DCONFIG_MCUBOOT_BOOTLOADER_MODE_SWAP_SCRATCH<span class="o">=</span>y
</code></pre></div>
</div>
<p>For more information on the <code class="docutils literal notranslate"><span class="pre">smp_svr</span></code> sample, please refer to <a class="reference external" href="https://docs.zephyrproject.org/latest/samples/subsys/mgmt/mcumgr/smp_svr/README.html#smp-svr">Zephyr’s documentation</a>.</p>
<h4 id="signing-the-image">Signing the image<a class="headerlink" href="#signing-the-image" title="Permalink to this heading">¶</a></h4>
<p>By default MCUboot will only accept images that are properly signed with the same key as the bootloader itself.
Only <code class="docutils literal notranslate"><span class="pre">BIN</span></code> and <code class="docutils literal notranslate"><span class="pre">HEX</span></code> output types can be signed.
The recommended way for managing signing keys is using <a class="reference internal" href="#generating-image-signing-key"><span class="xref myst">MCUboot’s image tool</span></a>,
which is shipped together with Zephyr’s MCUboot implementation.
When signing an image, you also have to provide an image version, that’s embedded in the signed image header.
This is also the value that will be reported by the MCUmgr client as the current running software version back to the <a class="reference internal" href="rdfm_mgmt_server.html"><span class="std std-doc">RDFM server</span></a>.
Image version is specified in <code class="docutils literal notranslate"><span class="pre">major.minor.revision+build</span></code> format.</p>
<h5 id="automatically">Automatically<a class="headerlink" href="#automatically" title="Permalink to this heading">¶</a></h5>
<p>Zephyr build system can automatically sign the final image for you.
To enable this functionality, you will have to set:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MCUBOOT_SIGNATURE_KEY_FILE</span></code>: path to the signing key</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MCUBOOT_IMGTOOL_SIGN_VERSION</span></code>: version of the produced image
before building your application.
Here’s a modification of the build command from <a class="reference internal" href="#building-the-image"><span class="xref myst">building the image</span></a> with those settings applied:</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code><span class="w">    </span>west<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-d<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-b<span class="w"> </span>stm32f746g_disco<span class="w"> </span><span class="se">\</span>
<span class="w">        </span><span class="s2">&quot;~/zephyrproject/zephyr/samples/subsys/mgmt/mcumgr/smp_svr&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--<span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DDTC_OVERLAY_FILE<span class="o">=</span><span class="s2">&quot;stm32_disco.overlay&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DEXTRA_CONF_FILE<span class="o">=</span><span class="s2">&quot;overlay-serial.conf&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DCONFIG_MCUBOOT_BOOTLOADER_MODE_SWAP_SCRATCH<span class="o">=</span>y<span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DCONFIG_MCUBOOT_SIGNATURE_KEY_FILE<span class="o">=</span><span class="s1">&#39;&quot;key.pem&quot;&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>-DCONFIG_IMGTOOL_SIGN_VERSION<span class="o">=</span><span class="s1">&#39;&quot;1.2.3+4&quot;&#39;</span>
</code></pre></div>
</div>
<h5 id="manually">Manually<a class="headerlink" href="#manually" title="Permalink to this heading">¶</a></h5>
<p>You can also sign the produced images yourself using the <a class="reference internal" href="#generating-image-signing-key"><span class="xref myst">image tool</span></a>.
Below is a sample showing how to sign previously built image:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>west<span class="w"> </span>sign<span class="w"> </span>-d<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>imgtool<span class="w"> </span>--<span class="w"> </span>--key<span class="w"> </span>&lt;key-file&gt;<span class="w"> </span>--version<span class="w"> </span>&lt;sign-version&gt;
</code></pre></div>
</div>
<p>Either way, the signed images will be stored next to their unsigned counterparts. They will have <code class="docutils literal notranslate"><span class="pre">signed</span></code> inserted into the filename (e.g. unsigned <code class="docutils literal notranslate"><span class="pre">zephyr.bin</span></code> will produce <code class="docutils literal notranslate"><span class="pre">zephyr.signed.bin</span></code> signed image).</p>
<h3 id="self-confirmed-updates">Self-confirmed updates<a class="headerlink" href="#self-confirmed-updates" title="Permalink to this heading">¶</a></h3>
<p>By default, MCUmgr client will try to manually confirm a new image during an update.
While this works in simple cases, you might wish to run some additional test logic that should be used to determine if an update should be finalized.
For example, you might want to reject an update in case one of the drivers failed to start or if the network stack is misconfigured.
The client supports these kinds of use cases using self-confirming images.
Rather than confirming an update by itself,
the client will instead watch the primary image slot of the device to determine if an update was marked as permanent or if it was rejected.
In that case, the final decision falls on the updated device.</p>
<p>For this feature to work correctly, you will have to modify your application to include the self-testing logic.</p>
<div class="highlight-c notranslate"><div class="annotate highlight"><pre><span></span><code><span class="cm">/*</span>
<span class="cm"> * An example of self-test function.</span>
<span class="cm"> * It will first check if this is a fresh update and run the testing logic.</span>
<span class="cm"> * Based on results, it will either mark the update as permanent or reboot,</span>
<span class="cm"> * causing MCUboot to revert to the previous version.</span>
<span class="cm"> *</span>
<span class="cm"> * This function should be called before the main application logic starts,</span>
<span class="cm"> * preferably at the beginning of the `main` function.</span>
<span class="cm"> */</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;zephyr/dfu/mcuboot.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;zephyr/sys/reboot.h&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">run_self_tests</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">boot_is_img_confirmed</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">passed</span><span class="p">;</span>

<span class="w">        </span><span class="cm">/* Testing logic goes here */</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">passed</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sys_reboot</span><span class="p">(</span><span class="n">SYS_REBOOT_COLD</span><span class="p">);</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">boot_write_img_confirmed</span><span class="p">();</span><span class="w"> </span><span class="c1">// (2)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ol class="arabic simple">
<li><p>Tests failed - device reboots itself, returning to previous version</p></li>
<li><p>Tests passed - device confirms the update, marking it as permanent</p></li>
</ol>
</div>
<h2 id="configuring-mcumgr-client">Configuring MCUmgr client<a class="headerlink" href="#configuring-mcumgr-client" title="Permalink to this heading">¶</a></h2>
<h3 id="search-locations">Search locations<a class="headerlink" href="#search-locations" title="Permalink to this heading">¶</a></h3>
<p>The client is configured using <code class="docutils literal notranslate"><span class="pre">config.json</span></code> configuration file.
By default, the client will look for this file in:</p>
<ul class="simple">
<li><p>current working directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$HOME/.config/rdfm-mcumgr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/etc/rdfm-mcumgr</span></code></p></li>
</ul>
<p>stopping at first configuration file found.
You can override this by specifying path to a different configuration file with <code class="docutils literal notranslate"><span class="pre">-c/--config</span></code> flag:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>rdfm-mcumgr-client<span class="w"> </span>--config<span class="w"> </span>&lt;path-to-config&gt;
</code></pre></div>
</div>
<p>All of the non-device specific options can also be overwritten by specifying their flag counterpart.
For a full list you can run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>rdfm-mcumgr-client<span class="w"> </span>--help
</code></pre></div>
</div>
<h3 id="configuration-values">Configuration values<a class="headerlink" href="#configuration-values" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">server</span></code> - URL of the RDFM server the client should connect to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_dir</span></code> - path (relative or absolute) to the directory where all device keys are stored</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">update_interval</span></code> - interval between each update poll to RDFM server (accepts time suffixes ‘s’, ‘m’, ‘h’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">retries</span></code> - (optional) how many times should an update be attempted for a device in case of an error
(no value or value <code class="docutils literal notranslate"><span class="pre">0</span></code> means no limit)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">devices</span></code> - an array containing configuration for each device the client should handle</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - display name for device, used only for logging</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> - unique device identifier used when communicating with RDFM server</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device_type</span></code> - device type reported to RDFM server used to specify compatible artifacts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code> - name of the file containing device private key in PEM format. Key should be stored in <code class="docutils literal notranslate"><span class="pre">key_dir</span></code> directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self_confirm</span></code> - (optional) bool indicating whether the device will confirm updates by itself. False by default</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">update_interval</span></code> - (optional) override global <code class="docutils literal notranslate"><span class="pre">update_interval</span></code> for this device</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transport</span></code> - specifies the transport type for the device and it’s specific options</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">groups</span></code> - an array containing configuration for device groups</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - display name for group, used for logging</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> - unique group identifier used when communicating with RDFM server</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - type reported to RDFM server to specify compatible artifacts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code> - name of the file containing group private key in PEM format. Key should be stored in <code class="docutils literal notranslate"><span class="pre">key_dir</span></code> directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">update_interval</span></code> - (optional) override global <code class="docutils literal notranslate"><span class="pre">update_interval</span></code> for this group</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">members</span></code> - an array containing configuration for each device that’s a member of this group</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - display name for device, used for logging</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device</span></code> - name of target image to match from an artifact</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self_confirm</span></code> - (optional) bool indicating whether the device will confirm updates by itself. False by default</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transport</span></code> - specifies the transport type for the device and its specific options</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Transport specific:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - specific transport type for this device. Currently supported: <code class="docutils literal notranslate"><span class="pre">ble</span></code>, <code class="docutils literal notranslate"><span class="pre">serial</span></code>, <code class="docutils literal notranslate"><span class="pre">udp</span></code></p></li>
</ul>
<ul class="simple">
<li><p>BLE transport:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">device_index</span></code> - controller index to be used for connection (e.g. <code class="docutils literal notranslate"><span class="pre">hci0</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">peer_name</span></code> - the name the target BLE device advertises. Should match with <code class="docutils literal notranslate"><span class="pre">CONFIG_BT_DEVICE_NAME</span></code></p></li>
</ul>
</li>
<li><p>Serial transport:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">device</span></code> - device name used for communicating with device. OS specific (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;/dev/ttyUSB0&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;/dev/tty.usbserial&quot;</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">baud</span></code> - communication speed; must match the baudrate of connected device</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mtu</span></code> - Maximum Transmission Unit, maximum protocol packet size</p></li>
</ul>
</li>
<li><p>UDP transport:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code>: IPv4 / IPv6 address and port in <code class="docutils literal notranslate"><span class="pre">IP</span></code>:<code class="docutils literal notranslate"><span class="pre">port</span></code> form</p></li>
</ul>
</li>
</ul>
<h3 id="device-groups">Device groups<a class="headerlink" href="#device-groups" title="Permalink to this heading">¶</a></h3>
<p>The client supports grouping multiple Zephyr MCUboot boards to act as one complete device from management server’s perspective.
While each device in a group can be running different Zephyr application,
all devices are synchronized by the MCUmgr client to be running the exact same software version.
Group updates are performed using <a class="reference internal" href="rdfm_artifact.html#creating-a-zephyr-mcuboot-group-artifact"><span class="std std-ref">zephyr group artifacts</span></a>
which contain update images for each member of the group and metadata on how to match image to device.</p>
<p>During an update, the MCUmgr client matches each image to its target member and tries to apply it.
Group update is considered successful only if <strong>all</strong> members of the group went through the update process without errors.
Otherwise all members are rolled back by the client to the previous version.</p>
<h3 id="example-configuration">Example configuration<a class="headerlink" href="#example-configuration" title="Permalink to this heading">¶</a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;server&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:5000&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;key_dir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;keys&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;update_interval&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10s&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;retries&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;devices&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zephyr-ble&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;11:11:11:11:11:11&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dev_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zeph-ble&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;update_interval&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;15s&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ble.key&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;transport&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ble&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;device_index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;peer_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test0&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zephyr-serial&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;22:22:22:22:22:22&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dev_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zeph-ser&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;serial.key&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;self_confirm&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;transport&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;serial&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/dev/ttyACM0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;baud&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">115200</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;mtu&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;group-one&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gr1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;group1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;group1.key&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;members&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;udpl&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;udp-left&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;transport&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;udp&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;192.168.1.2:1337&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;udpr&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;udp-right&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;transport&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;udp&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;192.168.1.3:1337&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bleh&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ble&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;self_confirm&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;transport&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ble&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;device_index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;peer_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ble_head&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>
<h3 id="device-keys">Device keys<a class="headerlink" href="#device-keys" title="Permalink to this heading">¶</a></h3>
<p>Each device uses its own private key for authentication with <code class="docutils literal notranslate"><span class="pre">rdfm-server</span></code> as described in <a class="reference internal" href="server_operation.html#device-authentication"><span class="std std-ref">device authentication</span></a>.
Each key should be stored under <code class="docutils literal notranslate"><span class="pre">key_dir</span></code> specified in configuration.
If the client doesn’t find corresponding device key for configured device, it will attempt to generate one itself.
The resulting key will be saved to the configured location with <code class="docutils literal notranslate"><span class="pre">0600</span></code> permissions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Device keys are different from the signing key used for signing the bootloader and application images!</p>
</div>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2025-10-31
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="rdfm_android_device_client.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: RDFM Android Device Client" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              RDFM Android Device Client
            </div>
          </div>
        </a>
      
      
        
        <a href="rdfm_artifact.html" class="md-footer__link md-footer__link--next" aria-label="Next: RDFM Artifact utility" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              RDFM Artifact utility
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        Copyright &#169; Antmicro, 2025.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/antmicro" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/antmicro" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["toc.integrate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
    
  </body>
</html>